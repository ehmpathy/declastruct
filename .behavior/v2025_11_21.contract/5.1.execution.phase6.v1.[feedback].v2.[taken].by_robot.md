# feedback taken

## blocker.1: pull version from package.json

**what**: hardcoded version string in CLI invoke
**where**: src/contract/cli/invoke.ts:19
**fix**: imported package.json and used `pkg.version`

```typescript
import pkg from '../../../package.json';
// ...
.version(pkg.version);
```

## blocker.2: remove `resource:` prefix from output

**what**: resource identifiers in logs included unnecessary `resource:$class:` prefix
**where**:
- src/domain.operations/plan/planChanges.ts:55
- src/domain.operations/apply/applyChanges.ts:52
- src/domain.operations/apply/applyChanges.ts:80

**fix**: removed prefix, now using just `$slug` which already contains class name

**before**:
```typescript
`${symbol} [${change.action}] resource:${change.forResource.class}:${change.forResource.slug}`
```

**after**:
```typescript
`${symbol} [${change.action}] ${change.forResource.slug}`
```

## blocker.3: use `.clone()` instead of spreading

**what**: tests were using `DemoResource.build({ ...resource, updates })` pattern
**where**:
- src/domain.operations/apply/applyChanges.integration.test.ts:108,255,339,445
- src/domain.operations/plan/planChanges.integration.test.ts:109,200

**fix**: replaced all spreading with `.clone()` method

**before**:
```typescript
DemoResource.as({ ...initialResource, name: 'New Name' })
```

**after**:
```typescript
initialResource.clone({ name: 'New Name' })
```

## follow-up: fix TypeScript type errors

**what**: `applyChange` function calls missing required `resource` parameter, plus incorrect class name usage
**where**: src/domain.operations/apply/applyChange.test.ts

**fix 1**: added missing `resource` parameter to all `applyChange` calls
- lines 41, 88, 137, 184, 234, 284

**before**:
```typescript
await applyChange({
  change,
  providers: [provider],
  context: {},
});
```

**after**:
```typescript
await applyChange({
  resource,  // or resource: desired, depending on test case
  change,
  providers: [provider],
  context: {},
});
```

**fix 2**: replaced `DemoResource.constructor.name` with `DemoResource.name`
- all change construction in tests

**before**:
```typescript
class: DemoResource.constructor.name,  // returns "Function" ❌
```

**after**:
```typescript
class: DemoResource.name,  // returns "DemoResource" ✅
```

## status

all blockers addressed ✅
all TypeScript types pass ✅
all unit tests pass (6/6) ✅
